#!/bin/sh
# Copyright (c) 2011 Wolfram Schneider, http://bbbike.org
#
# wgs84-to-bbbike -  convert polar data to bbbike internal format, for the perl/tk version

: ${data_osm=data-osm}
: ${data_osm_bbbike=data-osm.bbbike}
: ${debug=""}

# die on exit
set -e


for city 
do
   rm -rf $data_osm_bbbike/$city
   mkdir -p $data_osm_bbbike/$city
   files=""

   perl miscsrc/convert_coordsys --input-dir=$data_osm/$city --output-dir=$data_osm_bbbike/$city polar 
   #( cd $data_osm_bbbike/$city; perl -i -npe 's,:map: polar,:map: standard,g; s,: map: standard,:map: standard,' $files ) 

   # convert meta.dd files
   $0-meta $data_osm/$city/meta.dd $data_osm_bbbike/$city/meta.dd
   rsync -a $data_osm/$city/temp_blockings $data_osm_bbbike/$city 
done

